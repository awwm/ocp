(()=>{"use strict";var e,t={378:()=>{const e=window.wp.blocks,t=window.wp.element,a=window.React,r=window.wp.i18n,l=window.wp.components,n=window.wp.blockEditor,s=window.wp.data,c=function({selectedItems:e}){const{editPost:t}=(0,s.useDispatch)("core/editor");return(0,a.useEffect)((()=>{const a=wp.data.select("core/editor").getCurrentPostId(),r=wp.data.select("core/editor").getEditedPostAttribute("meta").oddComparisonVal,l=[...new Set([...r||[],...e])];t({meta:{oddComparisonVal:l}},a)}),[e]),null},o=window.lodash;(0,e.registerBlockType)("sw-ocbc/oc",{edit:e=>{const{attributes:s,setAttributes:o}=e,[i,m]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0),[E,w]=(0,a.useState)(null);(0,a.useEffect)((()=>{s.selectedItems&&s.selectedItems.length>0&&p(s.selectedItems),fetch("https://api.the-odds-api.com/v4/sports/upcoming/odds/?regions=eu&markets=h2h&apiKey=81fcb06f4f39ab2a3faf0dbe93e23524").then((e=>e.json())).then((e=>{m(e),h(!1)})).catch((e=>{w(e),h(!1)}))}),[]);const k=i.reduce(((e,t)=>{const a=t.sport_title;return e[a]||(e[a]=[]),e[a].push(t),e}),{});return(0,t.createElement)("div",{...n.useBlockProps},(0,t.createElement)("h2",null,(0,r.__)("Select Items")),u?(0,t.createElement)("p",null,"Loading..."):E?(0,t.createElement)("p",null,"Error fetching data."):(0,t.createElement)("div",null,Object.entries(k).map((([e,a])=>(0,t.createElement)("div",{key:e},(0,t.createElement)("h3",null,e),a.map((e=>(0,t.createElement)("div",{key:e.id},(0,t.createElement)(l.CheckboxControl,{label:`${e.home_team} vs ${e.away_team}`,checked:d.some((t=>t.id===e.id)),onChange:t=>((e,t)=>{const a=t?[...d,e]:d.filter((t=>t.id!==e.id));p(a),o({selectedItems:a})})(e,t)}),(0,t.createElement)("ul",null,e.bookmakers.map((e=>(0,t.createElement)("li",{key:e.key},e.title,e.markets.map((e=>(0,t.createElement)("div",{key:e.key},(0,t.createElement)("ul",null,e.outcomes.map((e=>(0,t.createElement)("li",{key:e.name},`${e.name} - Price: ${e.price}`)))))))))))))))))),(0,t.createElement)(c,{selectedItems:d}))},save:({attributes:e})=>{const a=(l=e.selectedItems,(0,o.groupBy)(l,"sport_title"));var l;return(0,t.createElement)("div",null,(0,t.createElement)("h2",null,(0,r.__)("Selected Items")),0===e.selectedItems.length?(0,t.createElement)("p",null,"No selected items."):(0,t.createElement)("div",null,Object.entries(a).map((([e,a])=>(0,t.createElement)("div",{key:e},(0,t.createElement)("h3",{class:"sports-title"},e),a.map((e=>(0,t.createElement)("div",{class:"match-wrapper",key:e.id},(0,t.createElement)("p",{class:"teams",style:"font-weight:bold;"},(0,t.createElement)("span",{style:"color:green;"},`${e.home_team}`)," VS ",(0,t.createElement)("span",{style:"color:red;"},`${e.away_team}`)),e.bookmakers.map((a=>(0,t.createElement)("div",{class:"pricing",key:a.key},(0,t.createElement)("div",{class:"bookmaker-title"},(0,t.createElement)("b",null,a.title)),a.markets.map((a=>(0,t.createElement)("div",{key:a.key},(0,t.createElement)("p",{class:"prices"}," Price :",a.outcomes.map((a=>(0,t.createElement)("span",{class:e.home_team===a.name?"home":"away"},`${a.price}`))))))))))))))))))}})}},a={};function r(e){var l=a[e];if(void 0!==l)return l.exports;var n=a[e]={exports:{}};return t[e](n,n.exports,r),n.exports}r.m=t,e=[],r.O=(t,a,l,n)=>{if(!a){var s=1/0;for(m=0;m<e.length;m++){a=e[m][0],l=e[m][1],n=e[m][2];for(var c=!0,o=0;o<a.length;o++)(!1&n||s>=n)&&Object.keys(r.O).every((e=>r.O[e](a[o])))?a.splice(o--,1):(c=!1,n<s&&(s=n));if(c){e.splice(m--,1);var i=l();void 0!==i&&(t=i)}}return t}n=n||0;for(var m=e.length;m>0&&e[m-1][2]>n;m--)e[m]=e[m-1];e[m]=[a,l,n]},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={514:0,907:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var l,n,s=a[0],c=a[1],o=a[2],i=0;if(s.some((t=>0!==e[t]))){for(l in c)r.o(c,l)&&(r.m[l]=c[l]);if(o)var m=o(r)}for(t&&t(a);i<s.length;i++)n=s[i],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(m)},a=self.webpackChunkocbc=self.webpackChunkocbc||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=r.O(void 0,[907],(()=>r(378)));l=r.O(l)})();